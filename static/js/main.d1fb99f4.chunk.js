(this["webpackJsonpyakunin-predator-prey"]=this["webpackJsonpyakunin-predator-prey"]||[]).push([[0],{10:function(e,t,a){e.exports={root:"styles_root__32LC3",list:"styles_list__1zmfO",option:"styles_option__28eY7",title:"styles_title__1JoGE",value:"styles_value__2qwGT"}},188:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),l=a.n(c),s=a(19),o=a.n(s),i=a(12),p=a(48),u=a.n(p),m=a(18),d=a(23),b=a.n(d),_=a(25),y=a.n(_),f=function(e){var t=Object(n.useState)(),a=Object(m.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){switch(e.map[e.row][e.col]){case"prey":l(y.a.prey);break;case"predator":l(y.a.predator);break;case"food":l(y.a.food);break;default:l()}}),[e]),r.a.createElement("div",{className:y.a.root},r.a.createElement("div",{className:b()(c,y.a.circle)}))},h=function(e){return r.a.createElement("div",{className:u.a.root},e.isMapCreated?r.a.createElement("div",{className:u.a.grid},e.map.map((function(t,a){return r.a.createElement("div",{key:a,className:u.a.grid__row},t.map((function(t,n){return r.a.createElement(f,{key:"".concat(a,":").concat(n),row:a,col:n,map:e.map})})))}))):null)},E=a(5),g=function(e){return e.map},v=a(205),N=a(11),x=a(206),M=Object(N.a)({root:{color:"#52af77",height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(x.a),O=Object(N.a)({root:{padding:"0 15px",width:"calc(100% - 30px)"},button_apply:{backgroundColor:"#52af77",color:"rgb(241, 241, 241)"},container:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px"},section:{},section_title:{margin:"0 0 10px"},selectors_container:{padding:"0 15px"},section_subtitle:{margin:0,display:"inline",marginRight:"5px"},row:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:"5px"},button_container:{marginTop:"10px"}})((function(e){var t=e.classes,a=e.className,c=Object(i.b)(),l=Object(i.c)(g),s=Object(n.useState)(l.size),o=Object(m.a)(s,2),p=o[0],u=o[1],d=Object(n.useState)(l.start),_=Object(m.a)(d,2),y=_[0],f=_[1],h=Object(n.useState)(l.speed),N=Object(m.a)(h,2),x=N[0],O=N[1],j=Object(n.useCallback)((function(){l.size.width!==p.width||l.size.height!==p.height||l.start.x!==y.x||l.start.y!==y.y?c(function(e,t,a){return{type:"MAP_CHANGE_PARAMS",payload:{size:e,start:t,speed:a}}}(p,y,x)):l.speed!==x?c(function(e){return{type:"MAP_CHANGE_SPEED",payload:{speed:e}}}(x)):c({type:"MAP_RESTART"})}),[c,p,y,x,l]);return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.container},r.a.createElement("div",{className:b()(t.map,t.section)},r.a.createElement("h4",{className:t.section_title},"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043c\u0438\u0440\u0430"),r.a.createElement("div",{className:t.selectors_container},r.a.createElement("div",{className:t.row},r.a.createElement("h5",{className:t.section_subtitle},"\u0428\u0438\u0440\u0438\u043d\u0430:"),r.a.createElement(M,{defaultValue:26,getAriaValueText:function(e){return e},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:10,max:35,onChange:function(e,t){return u((function(e){return Object(E.a)(Object(E.a)({},e),{},{width:t})}))}})),r.a.createElement("div",{className:t.row},r.a.createElement("h5",{className:t.section_subtitle},"\u0412\u044b\u0441\u043e\u0442\u0430:"),r.a.createElement(M,{defaultValue:26,getAriaValueText:function(e){return e},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:10,max:35,onChange:function(e,t){return u((function(e){return Object(E.a)(Object(E.a)({},e),{},{height:t})}))}})),r.a.createElement("div",{className:t.row},r.a.createElement("h5",{className:t.section_subtitle},"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\xa0\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445:"),r.a.createElement(M,{defaultValue:1,getAriaValueText:function(e){return e},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:.2,min:.3,max:2,onChange:function(e,t){return O(1e3*t)}})))),r.a.createElement("div",{className:b()(t.pos,t.section)},r.a.createElement("h4",{className:t.section_title},"\u0418\u0437\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u043e\u0437\u0438\u0446\u0438\u044f"),r.a.createElement("div",{className:t.selectors_container},r.a.createElement("div",{className:t.row},r.a.createElement("h5",{className:t.section_subtitle},"\u041e\u0441\u044c\xa0X:"),r.a.createElement(M,{defaultValue:13,getAriaValueText:function(e){return e},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:0,max:p.width,onChange:function(e,t){return f((function(e){return Object(E.a)(Object(E.a)({},e),{},{x:t})}))}})),r.a.createElement("div",{className:t.row},r.a.createElement("h5",{className:t.section_subtitle},"\u041e\u0441\u044c\xa0Y:"),r.a.createElement(M,{defaultValue:13,getAriaValueText:function(e){return e},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:0,max:p.height,onChange:function(e,t){return f((function(e){return Object(E.a)(Object(E.a)({},e),{},{y:t})}))}}))))),r.a.createElement("div",{className:t.button_container},r.a.createElement(v.a,{className:b()(t.button_apply,a),onClick:j},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c")))})),j=a(60),C=a.n(j),A=function(){return r.a.createElement("header",{className:C.a.header},r.a.createElement("h1",{className:C.a.title},"\u041c\u043e\u0434\u0435\u043b\u044c \u0445\u0438\u0449\u043d\u0438\u043a-\u0436\u0435\u0440\u0442\u0432\u0430"))},w=a(82),k=function(e){var t=e.data,a=e.labels;return r.a.createElement(w.a,{data:{labels:a,datasets:[{label:"\u0416\u0435\u0440\u0442\u0432\u044b",data:t,backgroundColor:"#e9c46a"}]},options:{title:{display:!1,text:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",fontSize:24,fontFamily:"Roboto Mono",fontColor:"rgb(241, 241, 241)"},legend:{display:!0,labels:{fontFamily:"Roboto Mono",fontColor:"rgb(241, 241, 241)"}},scales:{yAxes:[{gridLines:{display:!0,color:"rgba(241, 241, 241, 0.3)"},ticks:{fontColor:"rgb(241, 241, 241)",fontFamily:"Roboto Mono"},scaleLabel:{display:!0,labelString:"\u041f\u043e\u043f\u0443\u043b\u044f\u0446\u0438\u044f",fontColor:"rgb(241, 241, 241)",fontFamily:"Roboto Mono",fontSize:16}}],xAxes:[{gridLines:{display:!0,color:"rgb(241, 241, 241, 0.3)"},ticks:{fontColor:"rgb(241, 241, 241)",fontFamily:"Roboto Mono"},scaleLabel:{display:!0,labelString:"\u0412\u0440\u0435\u043c\u044f \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438",fontColor:"rgb(241, 241, 241)",fontFamily:"Roboto Mono",fontSize:16}}]}}})},D=a(10),S=a.n(D),T=function(e){var t=Object(i.c)(g),a=Object(n.useState)(0),c=Object(m.a)(a,2),l=c[0],s=c[1];return Object(n.useEffect)((function(){t.chartData.length>1&&s(t.chartData.slice(-100,-1).reduce((function(e,t){return e+t}))/t.chartData.length<100?t.chartData.length:100)}),[t.chartData]),r.a.createElement("div",{className:S.a.root},r.a.createElement("ul",{className:S.a.list},r.a.createElement("li",{className:S.a.option},r.a.createElement("h4",{className:S.a.title},"\u0421\u0440\u0435\u0434\u043d\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0436\u0435\u0440\u0442\u0432 \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 100 \u0438\u0442\u0435\u0440\u0430\u0446\u0438\u0439:"),r.a.createElement("p",{className:S.a.value},l)),r.a.createElement("li",{className:S.a.option},r.a.createElement("h4",{className:S.a.title},"\u0421\u0440\u0435\u0434\u043d\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0445\u0438\u0449\u043d\u0438\u043a\u043e\u0432 \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 100 \u0438\u0442\u0435\u0440\u0430\u0446\u0438\u0439:"),r.a.createElement("p",{className:S.a.value},"0")),r.a.createElement("li",{className:S.a.option},r.a.createElement("h4",{className:S.a.title},"\u041f\u043b\u043e\u0449\u0430\u0434\u044c \u043c\u0438\u0440\u0430:"),r.a.createElement("p",{className:S.a.value},t.size.width*t.size.height))))},R=function(e){var t=Object(i.b)(),a=Object(i.c)((function(e){return e.map}));return Object(n.useEffect)((function(){if(a.isMapCreated){var e=setInterval((function(){t({type:"MAP_STEP"})}),a.speed);return function(){return clearInterval(e)}}t({type:"MAP_INIT"}),t({type:"MAP_ADD_CREATURE",payload:{start:a.start,type:"prey"}})}),[t,a]),r.a.createElement("div",{className:o.a.root},r.a.createElement(A,null),r.a.createElement("main",{className:o.a.main},r.a.createElement("section",{className:o.a["map-container"]},r.a.createElement(h,{map:a.currentMap,isMapCreated:a.isMapCreated})),r.a.createElement("section",{className:o.a["stats-container"]},r.a.createElement("div",{className:o.a["stats-block"]},r.a.createElement(k,{data:a.chartData,labels:a.chartLabels})),r.a.createElement("div",{className:o.a["stats-block"]},r.a.createElement(O,null)),r.a.createElement("div",{className:o.a["stats-block"]},r.a.createElement(T,null)))))},L=a(22),P=a(35),z=a(61),V=a.n(z),I=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"empty",n=[],r=0;r<t;r++){for(var c=[],l=0;l<e;l++)c.push(a);n.push(c)}return n},G=function(e){return e.map((function(e){return Object(P.a)(e)}))},F=function(e,t,a){var n=a.length,r=a[0].length,c=[];return t>0&&"empty"===a[e][t-1]&&c.push([e,t-1]),e+1<r&&"empty"===a[e+1][t]&&c.push([e+1,t]),t+1<n&&"empty"===a[e][t+1]&&c.push([e,t+1]),e>0&&"empty"===a[e-1][t]&&c.push([e-1,t]),4===c.length?[V.a.sample(c),[e,t]]:!!c.length&&[V.a.sample(c)]},B={iteration:0,preysCount:0,chartData:[0],chartLabels:["0"],size:{width:26,height:26},start:{x:13,y:13},speed:1e3,currentMap:[],nextMap:[],isMapCreated:!1},H=Object(L.b)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MAP_INIT":case"MAP_RESTART":var a=I(e.size.width,e.size.height);return Object(E.a)(Object(E.a)({},e),{},{iteration:0,preysCount:0,chartData:[0],chartLabels:["0"],currentMap:G(a),nextMap:a,isMapCreated:!0});case"MAP_CHANGE_PARAMS":return Object(E.a)(Object(E.a)({},e),{},{iteration:0,preysCount:0,size:t.payload.size,start:t.payload.start?t.payload.start:e.start,speed:t.payload.speed?t.payload.speed:e.speed,currentMap:[],nextMap:[],isMapCreated:!1});case"MAP_ADD_CREATURE":return e.nextMap[t.payload.start.x][t.payload.start.y]=t.payload.type,Object(E.a)(Object(E.a)({},e),{},{preysCount:"prey"===t.payload.type?e.preysCount+1:e.preysCount,currentMap:G(e.nextMap),nextMap:e.nextMap});case"MAP_STEP":var n=0;return e.currentMap.forEach((function(t,a){t.forEach((function(t,r){if("empty"!==e.currentMap[a][r]){var c=F(a,r,e.nextMap);if(c)switch(c.length){case 2:c.forEach((function(t){e.nextMap[t[0]][t[1]]="prey"})),n++;break;case 1:e.nextMap[c[0][0]][c[0][1]]="prey",e.nextMap[a][r]="empty"}else e.nextMap[a][r]="empty",n--}}))})),Object(E.a)(Object(E.a)({},e),{},{iteration:e.iteration+1,preysCount:e.preysCount+n,chartLabels:[].concat(Object(P.a)(e.chartLabels),["".concat(e.iteration+1)]),chartData:[].concat(Object(P.a)(e.chartData),[e.preysCount+n]),currentMap:G(e.nextMap),nextMap:e.nextMap});case"MAP_CHANGE_SPEED":return console.log("pidr"),Object(E.a)(Object(E.a)({},e),{},{speed:t.payload.speed});default:return e}}}),X=Object(L.c)(H,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(r.a.createElement(i.a,{store:X},r.a.createElement(R,null)),document.getElementById("root"))},19:function(e,t,a){e.exports={root:"App_root__2h8CC",main:"App_main__3ZkGI","map-container":"App_map-container__3kM1T","stats-container":"App_stats-container__2iv3E","stats-block":"App_stats-block__2uB8m"}},25:function(e,t,a){e.exports={root:"styles_root__-bKiG",circle:"styles_circle__2KwSW",food:"styles_food__anRMd",prey:"styles_prey__3CVNf",predator:"styles_predator__3po0d"}},48:function(e,t,a){e.exports={root:"styles_root__1Jquv",grid:"styles_grid__OML2l",grid__column:"styles_grid__column__HmnBo"}},60:function(e,t,a){e.exports={header:"styles_header__25lBf",menu:"styles_menu__2mFGE",menu__option:"styles_menu__option__1qeQB",title:"styles_title__2qn0m"}},87:function(e,t,a){e.exports=a(188)}},[[87,1,2]]]);
//# sourceMappingURL=main.d1fb99f4.chunk.js.map